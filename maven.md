# Maven

Maven 翻译为"专家"、"内行" , 是 Apache 下的一个纯 Java 开发的开源项目 . 基于项目对象模型\(缩写 : POM\)概念 , Maven利用一个中央信息片断能管理一个项目的构建、报告和文档等步骤 .

Maven 是一个项目管理工具 , 可以对 Java 项目进行构建、依赖管理 . 它包含了一个项目对象模型\(Project Object Model\) , 反映在配置中 , 就是一个 pom.xml 文件 . 是一组标准集合 , 一个项目的生命周期、一个依赖管理系统 , 另外还包括定义在项目生命周期阶段的插件\(plugin\)以及目标\(goal\) .

当我们使用 Maven 的使用 , 通过一个自定义的项目对象模型 , pom.xml 来详细描述我们自己的项目 .

Maven 中的有两大核心 :

* **依赖管理** : 对 jar 的统一管理\(Maven 提供了一个 Maven 的中央仓库 , [https://mvnrepository.com/](https://mvnrepository.com/) , 当我们在项目中添加完依赖之后 , Maven 会自动去中央仓库下载相关的依赖 , 并且解决依赖的依赖问题\)
* **项目构建** : 对项目进行编译、测试、打包、部署、上传到私服等

使用Maven可以自动处理jar包之间的冲突问题 , Maven中内置了两条依赖原则 : 最短路径优先和先声明优先 .

#### 构建的概念

构建并不是创建 , 创建一个工程并不等于构建一个项目 . 要了解构建的含义从下面三个层面来看 :

**纯Java代码**

Java扩展名的源文件需要编译成.class扩展名的字节码文件 , 这里的**编译** , 就是构建的一个环节 .

这里的编译 , 就是用到了JDK里的javac命令 . 还有java命令 , 用来运行 . jar命令 , 用来打jar包,war包 .

**Web工程**

当需要访问Java程序 , 把Java程序的编译结果**部署**到服务器指定目录 , 也是构建的环节 .

Web工程和其编译结果的目录结构对比 :

![](/assets/duibijieguo.png)

**实际项目**

在实际项目中整合第三方框架 , Web工程中除了Java程序和JSP页面 , 图片等静态资源之外 , 还包括第三方框架的jar包以及各种各样的配置文件 . 所有这些资源都必须按照正确的目录结构部署到服务器上 , 项目才可以运行 .

所以综上所述 , 构建就是以我们编写的Java代码 , 框架配置文件 , 国际化等其他资源文件 , JSP页面和图片等静态资源作为原材料 , 去生产出一个可以运行的项目的过程 .

### 构建环节

验证清理 - 删除之前的编译结果 , 为重新编译做好准备\(重新生成.class\) . 

编译 - 将Java源程序编译为字节码文件 . 

测试 - 针对项目中的关键点进行测试 , 确保项目在迭代开发过程中关键点的正确性\(JUnit\) . 

报告 - 在每一次测试后以标准的格式记录和展示测试结果 , 也就是单元测试的结果 , 报告还可以生成文本文件 . 

打包 - 将一个包含诸多文件的工程封装为一个压缩文件用于安装或者部署 , Java工程对应jar包 , Web工程对应war包 . 

安装 - 在Maven环境下特指将打包的结果 , jar包或war包安装到本地仓库中 . 

部署 - 将打包的结果部署到远程仓库或将war包部署到服务器上运行 . 

## Maven 功能

Maven 能够帮助开发者完成以下工作：

* 构建
* 文档生成
* 报告
* 依赖
* SCMs
* 发布
* 分发
* 邮件列表

## 约定配置

Maven 提倡使用一个共同的标准目录结构 , Maven 使用约定优于配置的原则 :

| 目录 | 说明 |
| :--- | :--- |
| ${basedir} | 存放pom.xml和所有的子目录 |
| ${basedir}/src/main/java | 项目的java源代码 |
| ${basedir}/src/main/resources | 项目的资源，比如说property文件，springmvc.xml |
| ${basedir}/src/test/java | 项目的测试类，比如说Junit代码 |
| ${basedir}/src/test/resources | 测试用的资源 |
| ${basedir}/src/main/webapp/WEB-INF | web应用文件目录，web项目的信息，比如存放web.xml、本地图片、jsp视图页面 |
| ${basedir}/target | 打包输出目录 |
| ${basedir}/target/classes | 编译输出目录 |
| ${basedir}/target/test-classes | 测试编译输出目录 |
| Test.java | Maven只会自动运行符合该命名规则的测试类 |
| ~/.m2/repository | Maven默认的本地仓库目录位置 |



